// Ride css. Released under MIT licence.
// https://github.com/ride-css/ride-css/

// A simple reminder. Typography is not a simple stuff. It always needs tweaking to work properly.
// I hope you will find those mixins useful, but remember, a good design cannot be achieved without reasoning.

// proxy for getting a mathematically calculated heading faster
--ride-set-heading($font-size, $line-height, $multiplier, $margin = 0)
  $$cache-args = $font-size + $line-height + $multiplier + $margin
  +cache('ride-headings-'+ arguments)
    if unit($line-height) not '' and unit($font-size) not ''
      if unit($font-size) != unit($line-height)
        // p(called-from)
        warn(': if you give $line-height a unit, it must be the same of $font-size')
    font-size: ($font-size * $multiplier)
    line-height: (($line-height * $font-size) / @font-size) if unit($line-height) is ''
    line-height: (parse-int($line-height) / parse-int(@font-size)) if unit($line-height) not ''
    margin: ($margin 0) if length($margin) == 1
    margin: $margin if length($margin) > 1
    
// // returns all h1-h6 html selectors
// this was difficult
headings()
  h1, 
  h2,
  h3,
  h4,
  h5,
  h6
    {block}

// returns all h1-h6 html selectors
// this will return headings with mathematically calculated line-height and font size 
ride-headings($font-size, $line-height, $margin = 0, $config = {})
  $config.oocss = $config.oocss || false
  $config.headings = $config.headings || (2 1.8 1.6 1.4 1.2 1)
  $config.h = $config.h || '.h'
  $config.placeholder = $config.placeholder || false
  for $current-heading, $offset in $config.headings
    if $config.placeholder is false
      if $config.oocss is false
        h{$offset + 1}
          --ride-set-heading($font-size, $line-height, $current-heading, $margin)
      else
        .h{$offset + 1}
          --ride-set-heading($font-size, $line-height, $current-heading, $margin)
    else
      $h{$offset + 1}
        --ride-set-heading($font-size, $line-height, $current-heading, $margin)

// aliasing ride-headings
ride-h = ride-headings     

// ride-tight-headings
// returns all h1-h6 html selectors
// those headings will keep a constant line-height, varying only the font-size. 
ride-tight-headings($font-size, $line-height, $margin = 0, $placeholder = false)
  -set-heading($font-size, $index, $line-height, $margin, $unit, $args)
    if $unit is 'px' or $unit is '%' or $unit is 'pt'
      font-size: unit($font-size * (length($args) - $index), $unit)
    else
      font-size: unit($font-size + (length($args) - $index) / 5, $unit)
    line-height: 1
    margin-vertical: $line-height if $margin is true and $margin not 0
    margin-vertical: $margin if $margin not true and $margin not 0
  $unit = unit($font-size)
  $args = h1 h2 h3 h4 h5 h6
  for $h, $index in $args
    if $placeholder is false
      {$h} 
        -set-heading($font-size, $index, $line-height, $margin, $unit, $args)
    else
      ${$h} 
        -set-heading($font-size, $index, $line-height, $margin, $unit, $args)