// Ride css. Released under MIT licence.
// https://github.com/ride-css/ride-css/

// proxy for getting an heading faster
--ride-set-heading($font-size, $line-height, $multiplier, $margin = 0)
  $$cache-args = $font-size + $line-height + $multiplier + $margin
  +cache('ride-headings-'+ arguments)
    if unit($line-height) not '' and unit($font-size) not ''
      if unit($font-size) != unit($line-height)
        // p(called-from)
        warn(': if you give $line-height a unit, it must be the same of $font-size')
    font-size: ($font-size * $multiplier)
    line-height: (($line-height * $font-size) / @font-size) if unit($line-height) is ''
    line-height: (parse-int($line-height) / parse-int(@font-size)) if unit($line-height) not ''
    margin: ($margin 0) if length($margin) == 1
    margin: $margin if length($margin) > 1

// basic typography calculation
ride-line-height($font-size, $line-height)
  line-height: ($line-height / $font-size)

// // returns all h1-h6 html selectors
// this was difficult
headings()
  h1
  h2
  h3
  h4
  h5
  h6
    {block}

// returns aligned classes
ride-align($class-prefix = 'align-', $placeholder = false)
  for $align in left center right justify
    +prefix-classes($class-prefix)
      if $placeholder is false
        .{$align}
          +cache('text-align'+ $align)
            text-align $align
      if $placeholder is true
        ${$class-prefix}{$align}
          text-align $align

// code styling
// use it with the <pre></pre> or <code></code> tag
ride-code($class = 'code, .code', $tab-size = 2)
  {$class}
    {block}
    tab-size $tab-size

// returns all h1-h6 html selectors
// it will properly calculate line-height and font size 
ride-headings($font-size, $line-height, $margin = 0, $config = {})
  $config.oocss = $config.oocss || false
  $config.headings = $config.headings || (2 1.8 1.6 1.4 1.2 1)
  $config.h = $config.h || '.h'
  $config.placeholder = $config.placeholder || false
  for $current-heading, $offset in $config.headings
    if $config.placeholder is false
      if $config.oocss is false
        h{$offset + 1}
          --ride-set-heading($font-size, $line-height, $current-heading, $margin)
      else
        .h{$offset + 1}
          --ride-set-heading($font-size, $line-height, $current-heading, $margin)
    else
      $h{$offset + 1}
        --ride-set-heading($font-size, $line-height, $current-heading, $margin)
// aliasing ride-headings
ride-h = ride-headings      

// highlighted text
ride-highlight($class = 'mark, .highlight')
  {$class}
    {block}
    background-color: #F1EED6 unless @background-color
    
// hr
ride-hr($font-size = 1em, $class = 'hr, .hr')
  {$class}
    {block}
    border-bottom: 1px solid currentColor unless @border-bottom
    margin: $font-size 0
    relative: top -(@border-bottom[0])

// returns a properly calculated "p" selector 
ride-paragraph($font-size = 1em, $line-height = 1.5, $margin = ($font-size / 4))
  if property
    --ride-set-heading: $font-size $line-height 1 $margin
  else
    p
      --ride-set-heading: $font-size $line-height 1 $margin
// aliasing
ride-p = ride-paragraph

ride-small($class = 'small, .small', $font-size = (62.5 / 100))
  {$class}
    font-size: unit($font-size, 'em')
    line-height: 1

// text style classes 
ride-text-style($class-prefix = 'text-', $config = {})
  $config.bold = $config.bold || 'strong'
  $config.capital = $config.capital || 'capital'
  $config.deleted = $config.deleted || 'deleted'
  $config.italic = $config.italic || 'italic'
  $config.lowercase = $config.lowercase || 'lowercase'
  $config.normal = $config.normal || 'normal'
  $config.placeholder = $config.placeholder || false
  $config.underlined = $config.underlined || 'underline'
  $config.uppercase = $config.uppercase || 'uppercase'
  if $config.placeholder is false
    +prefix-classes($class-prefix)
      .{$config.bold}
        font-weight bold
      .{$config.capital}
        text-transform capitalize
      .{$config.deleted}
        text-decoration line-through
      .{$config.italic}
        font-style italic
      .{$config.lowercase}
        text-transform lowercase
      .{$config.normal}
        font-weight normal
      .{$config.uppercase}
        text-transform uppercase
      .{$config.underlined}
        text-decoration underline
  if $config.placeholder is true
    ${$config.bold}
      font-weight bold
    ${$config.capital}
      text-transform capitalize
    ${$config.deleted}
      text-decoration line-through
    ${$config.italic}
      font-style italic
    ${$config.lowercase}
      text-transform lowercase
    ${$config.normal}
      font-weight normal
    ${$config.uppercase}
      text-transform uppercase
    ${$config.underlined}
      text-decoration underline


// using default ride-typography mixins
ride-typography($font-size = 1em, $line-height = 1.5, $margin = 0, $headings = (2 1.8 1.6 1.4 1.2 1), $placeholder = false)
  if not $placeholder
    ride-align()
    ride-code()
    ride-headings($font-size, $line-height, $margin, $config: {
      headings: $headings
    })
    ride-headings($font-size, $line-height, $margin, $config: {
      headings: $headings
      oocss: true  
    })
    ride-highlight()
    ride-hr($font-size)
    p
      ride-paragraph($font-size, $line-height, $margin)
    ride-small()
    ride-text-style()
  else
    ride-align($placeholder: $placeholder)
    ride-code()
    ride-headings($font-size, $line-height, $margin, $config: {
      headings: $headings,
      placeholder: $placeholder
    })
    ride-highlight()
    ride-hr($font-size)
    p
      ride-paragraph($font-size, $line-height, $margin)
    ride-small()
    ride-text-style($config: {
      placeholder: $placeholder
    })